<!DOCTYPE html>
<html lang="en"><head>
<script src="going_further_session2_files/libs/clipboard/clipboard.min.js"></script>
<script src="going_further_session2_files/libs/quarto-html/tabby.min.js"></script>
<script src="going_further_session2_files/libs/quarto-html/popper.min.js"></script>
<script src="going_further_session2_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="going_further_session2_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="going_further_session2_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="going_further_session2_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="going_further_session2_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.5.57">

  <meta name="author" content="GÃ©raldine Derroire">
  <meta name="dcterms.date" content="2025-05-24">
  <title>Going further with R - session 2/2</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="going_further_session2_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="going_further_session2_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="going_further_session2_files/libs/revealjs/dist/theme/quarto.css">
  <link href="going_further_session2_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="going_further_session2_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="going_further_session2_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="going_further_session2_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="going_further_session2_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="going_further_session2_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Going further with R - session 2/2</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
GÃ©raldine Derroire 
</div>
        <p class="quarto-title-affiliation">
            Cirad - UnB
          </p>
    </div>
</div>

  <p class="date">2025-05-24</p>
</section>
<section id="section" class="title-slide slide level1 center">
<h1></h1>
<p>Letâs load the package we will use:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href=""></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">

</div>
</section>

<section>
<section id="conditional-execution" class="title-slide slide level1 center">
<h1>Conditional execution</h1>
<p><strong>Conditional execution</strong> means running different blocks of code depending on whether a condition is TRUE or FALSE.</p>
</section>
<section id="if" class="slide level2">
<h2>if</h2>
<p><span style="font-size: 30px">Letâs write a function saying <em>Bom dia</em> only in the morning:</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href=""></a>greeting <span class="ot">&lt;-</span> <span class="cf">function</span>(time) {</span>
<span id="cb2-2"><a href=""></a>  time <span class="ot">&lt;-</span> <span class="fu">hm</span>(time) </span>
<span id="cb2-3"><a href=""></a>  time_limit <span class="ot">&lt;-</span> <span class="fu">hm</span>(<span class="st">"11:59"</span>)</span>
<span id="cb2-4"><a href=""></a>  <span class="cf">if</span> (time <span class="sc">&lt;</span> time_limit) {</span>
<span id="cb2-5"><a href=""></a>    <span class="fu">message</span>(<span class="st">"Bom dia !"</span>)</span>
<span id="cb2-6"><a href=""></a>  } </span>
<span id="cb2-7"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">

</div>
<p><span style="font-size: 25px">ð¡ The function <span style="color:indianred;">hm</span> from <span style="color:indianred;">lubridate</span> convert a character to a period object.</span></p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href=""></a><span class="fu">greeting</span>(<span class="st">"8:13"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stderr">
<pre><code>Bom dia !</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href=""></a><span class="fu">greeting</span>(<span class="st">"14:25"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">

</div>
</div>
<aside class="notes">
<p>very important function for me!!!</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="if-1" class="slide level2">
<h2>if</h2>

<img data-src="if.png" class="r-stretch"><p>The command <span style="color:indianred;">if</span> is used with:</p>
<ul>
<li class="fragment"><p>a condition (in parentheses)</p></li>
<li class="fragment"><p>a block of code (in curly brackets) that is executed only if the condition is TRUE</p></li>
</ul>
</section>
<section id="if-else" class="slide level2">
<h2>if / else</h2>
<p><span style="font-size: 30px">Letâs update our function to say <em>Boa tarde</em> in the afternoon:</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href=""></a>greeting <span class="ot">&lt;-</span> <span class="cf">function</span>(time) {</span>
<span id="cb6-2"><a href=""></a>  time <span class="ot">&lt;-</span> <span class="fu">hm</span>(time) </span>
<span id="cb6-3"><a href=""></a>  time_limit <span class="ot">&lt;-</span> <span class="fu">hm</span>(<span class="st">"11:59"</span>)</span>
<span id="cb6-4"><a href=""></a>  <span class="cf">if</span> (time <span class="sc">&lt;</span> time_limit) {</span>
<span id="cb6-5"><a href=""></a>    <span class="fu">message</span>(<span class="st">"Bom dia !"</span>)</span>
<span id="cb6-6"><a href=""></a>  } <span class="cf">else</span> {</span>
<span id="cb6-7"><a href=""></a>    <span class="fu">message</span>(<span class="st">"Boa tarde !"</span>)</span>
<span id="cb6-8"><a href=""></a>  }</span>
<span id="cb6-9"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">

</div>
<p><span class="fragment"><span style="font-size: 30px">and test it:</span></span></p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href=""></a><span class="fu">greeting</span>(<span class="st">"8:13"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stderr">
<pre><code>Bom dia !</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href=""></a><span class="fu">greeting</span>(<span class="st">"14:25"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stderr">
<pre><code>Boa tarde !</code></pre>
</div>
</div>
</div>
</section>
<section id="ifelse" class="slide level2">
<h2>if/else</h2>
<p>An <span style="color:indianred;">if</span> instruction can be followed by a <span style="color:indianred;">else</span> that is executed if the condition of <span style="color:indianred;">if</span> is FALSE.</p>

<img data-src="if_else.png" class="r-stretch"></section>
<section id="ifelse-ifelse" class="slide level2">
<h2>if/else if/else</h2>
<p><span style="font-size: 30px">But what to say in the evening?</span></p>
<div class="columns">
<div class="column" style="width:60%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href=""></a>greeting <span class="ot">&lt;-</span> <span class="cf">function</span>(time) {</span>
<span id="cb11-2"><a href=""></a>  time <span class="ot">&lt;-</span> <span class="fu">hm</span>(time) </span>
<span id="cb11-3"><a href=""></a>  time_limit1 <span class="ot">&lt;-</span> <span class="fu">hm</span>(<span class="st">"11:59"</span>)</span>
<span id="cb11-4"><a href=""></a>  time_limit2 <span class="ot">&lt;-</span> <span class="fu">hm</span>(<span class="st">"17:59"</span>)</span>
<span id="cb11-5"><a href=""></a>  <span class="cf">if</span> (time <span class="sc">&lt;</span> time_limit1) {</span>
<span id="cb11-6"><a href=""></a>    <span class="fu">message</span>(<span class="st">"Bom dia !"</span>)</span>
<span id="cb11-7"><a href=""></a>  } <span class="cf">else</span> <span class="cf">if</span> (time <span class="sc">&lt;</span> time_limit2) {</span>
<span id="cb11-8"><a href=""></a>    <span class="fu">message</span>(<span class="st">"Boa tarde !"</span>)</span>
<span id="cb11-9"><a href=""></a>  } <span class="cf">else</span> {</span>
<span id="cb11-10"><a href=""></a>    <span class="fu">message</span>(<span class="st">"Boa noite !"</span>)</span>
<span id="cb11-11"><a href=""></a>  }</span>
<span id="cb11-12"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">

</div>
</div><div class="column" style="width:40%;">
<p><span class="fragment"><span style="font-size: 30px">letâs check</span></span></p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href=""></a><span class="fu">greeting</span>(<span class="st">"8:13"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stderr">
<pre><code>Bom dia !</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href=""></a><span class="fu">greeting</span>(<span class="st">"14:25"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stderr">
<pre><code>Boa tarde !</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href=""></a><span class="fu">greeting</span>(<span class="st">"20:17"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stderr">
<pre><code>Boa noite !</code></pre>
</div>
</div>
</div>
</div></div>
</section>
<section id="ifelse-ifelse-1" class="slide level2">
<h2>if/else if/else</h2>
<p>We can add a second condition with <span style="color:indianred;">else if</span>. The second condition is tested only if the 1st condition is FALSE.</p>

<img data-src="if_else_if_else.png" class="r-stretch"></section>
<section id="order-of-conditions" class="slide level2">
<h2>Order of conditions</h2>
<p><span style="font-size: 30px">Only the block of the first TRUE condition is executed.</span></p>
<p><span style="font-size: 30px">â ï¸ <strong>The order of conditions is therefore important!</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href=""></a>greeting_wrong <span class="ot">&lt;-</span> <span class="cf">function</span>(time) {</span>
<span id="cb18-2"><a href=""></a>  time <span class="ot">&lt;-</span> <span class="fu">hm</span>(time) </span>
<span id="cb18-3"><a href=""></a>  time_limit1 <span class="ot">&lt;-</span> <span class="fu">hm</span>(<span class="st">"11:59"</span>)</span>
<span id="cb18-4"><a href=""></a>  time_limit2 <span class="ot">&lt;-</span> <span class="fu">hm</span>(<span class="st">"17:59"</span>)</span>
<span id="cb18-5"><a href=""></a>  <span class="cf">if</span> (time <span class="sc">&lt;</span> time_limit2) {</span>
<span id="cb18-6"><a href=""></a>    <span class="fu">message</span>(<span class="st">"Boa tarde !"</span>)</span>
<span id="cb18-7"><a href=""></a>  } <span class="cf">else</span> <span class="cf">if</span> (time <span class="sc">&lt;</span> time_limit1) {</span>
<span id="cb18-8"><a href=""></a>    <span class="fu">message</span>(<span class="st">"Bom dia !"</span>)</span>
<span id="cb18-9"><a href=""></a>  } <span class="cf">else</span> {</span>
<span id="cb18-10"><a href=""></a>    <span class="fu">message</span>(<span class="st">"Boa noite !"</span>)</span>
<span id="cb18-11"><a href=""></a>  }</span>
<span id="cb18-12"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">

</div>
<div class="fragment">
<p>ð¥´</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href=""></a><span class="fu">greeting_wrong</span>(<span class="st">"8:13"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stderr">
<pre><code>Boa tarde !</code></pre>
</div>
</div>
</div>
<aside class="notes">
<p>explain what happen following the code</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="section-1" class="slide level2">
<h2></h2>
<p><span style="font-size: 30px">ð¡ Now that we understand, we can use a more concise syntax for our function:</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href=""></a>greeting <span class="ot">&lt;-</span> <span class="cf">function</span>(time) {</span>
<span id="cb21-2"><a href=""></a>  <span class="cf">if</span> (<span class="fu">hm</span>(time)  <span class="sc">&lt;</span> <span class="fu">hm</span>(<span class="st">"11:59"</span>)) {</span>
<span id="cb21-3"><a href=""></a>    <span class="fu">message</span>(<span class="st">"Bom dia !"</span>)</span>
<span id="cb21-4"><a href=""></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">hm</span>(time)  <span class="sc">&lt;</span> <span class="fu">hm</span>(<span class="st">"17:59"</span>)) {</span>
<span id="cb21-5"><a href=""></a>    <span class="fu">message</span>(<span class="st">"Boa tarde !"</span>)</span>
<span id="cb21-6"><a href=""></a>  } <span class="cf">else</span> {</span>
<span id="cb21-7"><a href=""></a>    <span class="fu">message</span>(<span class="st">"Boa noite !"</span>)</span>
<span id="cb21-8"><a href=""></a>  }</span>
<span id="cb21-9"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">

</div>
<aside class="notes">
<p>if removed the 3 first lines and included the hm() in the tests</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="example-of-use" class="slide level2">
<h2>Example of use</h2>
<p><span style="font-size: 30px">We can modify our function <em>mean_diam</em> so that it rounds the diameter only if a value is given to the argument digits.</span> <span class="fragment"><span style="font-size: 30px">For that we give the default value NULL to the argument <em>digits</em>, and add a test before rounding:</span></span></p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href=""></a>mean_diam <span class="ot">&lt;-</span> <span class="cf">function</span>(circ, <span class="at">na_act =</span> <span class="cn">TRUE</span>, <span class="at">digits =</span> <span class="cn">NULL</span>) {</span>
<span id="cb22-2"><a href=""></a>    diam <span class="ot">&lt;-</span> circ <span class="sc">/</span> (pi <span class="sc">*</span> <span class="dv">100</span>) <span class="co"># Calculate diameters in m</span></span>
<span id="cb22-3"><a href=""></a>    mean_diam <span class="ot">&lt;-</span> <span class="fu">mean</span>(diam, <span class="at">na.rm =</span> na_act) <span class="co"># Calculate the mean </span></span>
<span id="cb22-4"><a href=""></a>  <span class="co"># Round the diameter only if a value is provided for digits</span></span>
<span id="cb22-5"><a href=""></a>    <span class="cf">if</span>(<span class="sc">!</span>(<span class="fu">is.null</span>(digits))) {</span>
<span id="cb22-6"><a href=""></a>      mean_diam <span class="ot">&lt;-</span> <span class="fu">round</span>(mean_diam, <span class="at">digits =</span> digits)</span>
<span id="cb22-7"><a href=""></a>    }</span>
<span id="cb22-8"><a href=""></a>    <span class="fu">return</span>(mean_diam) <span class="co"># Return the mean diameter</span></span>
<span id="cb22-9"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">

</div>
</div>
<div class="fragment">
<p><span style="font-size: 30px">Letâs test it:</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href=""></a>new_circ <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="at">n =</span> <span class="dv">35</span>, <span class="at">min =</span> <span class="dv">30</span>, <span class="at">max =</span> <span class="dv">250</span>) <span class="co"># create new data</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">

</div>
</div>
<div class="columns">
<div class="column" style="width:50%;">
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href=""></a><span class="fu">mean_diam</span>(new_circ)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.5199584</code></pre>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href=""></a><span class="fu">mean_diam</span>(new_circ, <span class="at">digits =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.52</code></pre>
</div>
</div>
</div>
</div></div>
<aside class="notes">
<p>function mean_diam seen in the previous session: change the units of diameter, take the mean and round it</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="another-example" class="slide level2">
<h2>Another example</h2>
<p>What does this function do?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href=""></a>graph_var <span class="ot">&lt;-</span> <span class="cf">function</span>(v) { <span class="co"># v: a vector</span></span>
<span id="cb28-2"><a href=""></a>    <span class="cf">if</span> (<span class="fu">is.character</span>(v)) {</span>
<span id="cb28-3"><a href=""></a>        <span class="fu">barplot</span>(<span class="fu">table</span>(v))</span>
<span id="cb28-4"><a href=""></a>    } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">is.numeric</span>(v)) {</span>
<span id="cb28-5"><a href=""></a>        <span class="fu">hist</span>(v)</span>
<span id="cb28-6"><a href=""></a>    } <span class="cf">else</span> {</span>
<span id="cb28-7"><a href=""></a>        <span class="fu">message</span>(<span class="st">"The type of v is not supported by the function"</span>)</span>
<span id="cb28-8"><a href=""></a>    }</span>
<span id="cb28-9"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">

</div>
</section>
<section id="another-example-1" class="slide level2">
<h2>Another example</h2>
<p><span style="font-size: 30px">Letâs check:</span></p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href=""></a>v_char <span class="ot">&lt;-</span> <span class="fu">sample</span>(LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>], <span class="dv">100</span>, </span>
<span id="cb29-2"><a href=""></a>                 <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb29-3"><a href=""></a><span class="fu">graph_var</span>(v_char)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="going_further_session2_files/figure-revealjs/unnamed-chunk-21-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href=""></a>v_num <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">100</span>, <span class="at">min=</span><span class="dv">0</span>, <span class="at">max=</span><span class="dv">10</span>)</span>
<span id="cb30-2"><a href=""></a><span class="fu">graph_var</span>(v_num)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="going_further_session2_files/figure-revealjs/unnamed-chunk-22-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href=""></a>vec_logical <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>), <span class="dv">100</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb31-2"><a href=""></a><span class="fu">graph_var</span>(vec_logical)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stderr">
<pre><code>The type of v is not supported by the function</code></pre>
</div>
</div>
</section>
<section id="writing-conditions" class="slide level2">
<h2>Writing conditions</h2>
<p><span style="font-size: 30px">To write conditions, we use can:</span></p>
<ul>
<li class="fragment"><p><span style="font-size: 30px">logical operator: <span style="color:indianred;">&lt;</span>, <span style="color:indianred;">&gt;</span>, <span style="color:indianred;">&lt;=</span>, <span style="color:indianred;">&gt;=</span>, <span style="color:indianred;">%in%</span>, <span style="color:indianred;">==</span>, <span style="color:indianred;">!=</span>, <span style="color:indianred;">any</span>, <span style="color:indianred;">all</span>â¦</span></p></li>
<li class="fragment"><p><span style="font-size: 30px">type checking functions: <span style="color:indianred;">is.numeric</span>, <span style="color:indianred;">is.character</span>, <span style="color:indianred;">is.logical</span>â¦</span></p></li>
</ul>
<p><span class="fragment"><span style="font-size: 30px">and combine them using <span style="color:indianred;">&amp;&amp;</span> and <span style="color:indianred;">||</span></span></span></p>
<p><span class="fragment"><span style="font-size: 30px">ð¡ <span style="color:indianred;">&amp;&amp;</span> and <span style="color:indianred;">||</span> are equivalent to <span style="color:indianred;">&amp;</span> and <span style="color:indianred;">|</span> but only work for vector of length one. There are therefore safer to use in if/else conditions, as they need to return only one value.</span></span></p>
</section>
<section id="more-complex-conditions" class="slide level2">
<h2>More complex conditions</h2>
<p>Should we go the the party?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href=""></a>tricky_decision <span class="ot">&lt;-</span> <span class="cf">function</span>(cool_people, good_music) { <span class="co"># booleans</span></span>
<span id="cb33-2"><a href=""></a>  <span class="cf">if</span>(cool_people <span class="sc">&amp;&amp;</span> good_music) {</span>
<span id="cb33-3"><a href=""></a>    <span class="fu">message</span>(<span class="st">"Go!"</span>) </span>
<span id="cb33-4"><a href=""></a>  } <span class="cf">else</span> <span class="cf">if</span> (cool_people <span class="sc">||</span> good_music) {</span>
<span id="cb33-5"><a href=""></a>    <span class="fu">message</span>(<span class="st">"Maybe..."</span>)</span>
<span id="cb33-6"><a href=""></a>  } <span class="cf">else</span> {</span>
<span id="cb33-7"><a href=""></a>    <span class="fu">message</span>(<span class="st">"No way!"</span>)</span>
<span id="cb33-8"><a href=""></a>  }</span>
<span id="cb33-9"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">

</div>
<p><span style="font-size: 30px">ð¡ As the expected values for the two arguments are booleans, we donât need to write == TRUE.</span></p>
<aside class="notes">
<p>Letâs see if you remember how to combine testsâ¦ What does this function do?</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="more-complex-conditions-1" class="slide level2">
<h2>More complex conditions</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href=""></a><span class="fu">tricky_decision</span>(<span class="at">cool_people =</span> <span class="cn">TRUE</span>, <span class="at">good_music =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stderr">
<pre><code>Go!</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href=""></a><span class="fu">tricky_decision</span>(<span class="at">cool_people =</span> <span class="cn">TRUE</span>, <span class="at">good_music =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stderr">
<pre><code>Maybe...</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href=""></a><span class="fu">tricky_decision</span>(<span class="at">cool_people =</span> <span class="cn">FALSE</span>, <span class="at">good_music =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stderr">
<pre><code>Maybe...</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href=""></a><span class="fu">tricky_decision</span>(<span class="at">cool_people =</span> <span class="cn">FALSE</span>, <span class="at">good_music =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stderr">
<pre><code>No way!</code></pre>
</div>
</div>
</section>
<section id="more-complex-conditions-2" class="slide level2">
<h2>More complex conditions</h2>
<p>What does this function do?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href=""></a>check_input <span class="ot">&lt;-</span> <span class="cf">function</span>(x, valid_val) {</span>
<span id="cb42-2"><a href=""></a>  <span class="cf">if</span>(<span class="fu">length</span>(x) <span class="sc">!=</span> <span class="dv">1</span> <span class="sc">||</span> <span class="sc">!</span>(x <span class="sc">%in%</span> valid_val)) {</span>
<span id="cb42-3"><a href=""></a>    <span class="fu">cat</span>(x, <span class="st">"is an invalid input."</span>)</span>
<span id="cb42-4"><a href=""></a>  } <span class="cf">else</span> {</span>
<span id="cb42-5"><a href=""></a>    <span class="fu">cat</span>(x, <span class="st">"is a valid input."</span>)</span>
<span id="cb42-6"><a href=""></a>  }</span>
<span id="cb42-7"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">

</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href=""></a><span class="fu">check_input</span>(<span class="at">x =</span> <span class="dv">2</span>, <span class="at">valid_val =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>2 is a valid input.</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href=""></a><span class="fu">check_input</span>(<span class="at">x =</span> <span class="dv">25</span>, <span class="at">valid_val =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>25 is an invalid input.</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href=""></a><span class="fu">check_input</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>), <span class="at">valid_val =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>2 3 is an invalid input.</code></pre>
</div>
</div>
</div>
<aside class="notes">
<p>a valid input is in the list of valid input and has a lenght of 1</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="ifelse-and-ifelse" class="slide level2">
<h2>if/else and ifelse</h2>
<p><span style="font-size: 30px">â ï¸ <span style="color:indianred;">if/else</span> and <span style="color:indianred;">ifelse</span> (or its <span style="color:indianred;">tidyverse</span> equivalent <span style="color:indianred;">if_else</span>) are very different:</span></p>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li class="fragment"><span style="font-size: 30px"><span style="color:indianred;">if/else</span> is used when testing a single condition and execute different blocks of code depending on its result:</span></li>
</ul>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href=""></a>x <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb49-2"><a href=""></a><span class="cf">if</span> (x <span class="sc">&gt;=</span> <span class="dv">10</span>) {</span>
<span id="cb49-3"><a href=""></a>    <span class="fu">message</span>(<span class="st">"&gt;=10"</span>)</span>
<span id="cb49-4"><a href=""></a>} <span class="cf">else</span> {</span>
<span id="cb49-5"><a href=""></a>    <span class="fu">message</span>(<span class="st">"&lt;10"</span>)</span>
<span id="cb49-6"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stderr">
<pre><code>&lt;10</code></pre>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li class="fragment"><span style="font-size: 30px"><span style="color:indianred;">ifelse</span> and <span style="color:indianred;">if_else</span> apply a test to all the elements of a vector and return a vector whose elements depend on the result of each test:</span></li>
</ul>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href=""></a>x <span class="ot">&lt;-</span> <span class="dv">5</span><span class="sc">:</span><span class="dv">15</span></span>
<span id="cb51-2"><a href=""></a><span class="fu">ifelse</span>(x <span class="sc">&gt;=</span> <span class="dv">10</span>, <span class="st">"&gt;=10"</span>, <span class="st">"&lt;10"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code> [1] "&lt;10"  "&lt;10"  "&lt;10"  "&lt;10"  "&lt;10"  "&gt;=10" "&gt;=10" "&gt;=10" "&gt;=10" "&gt;=10"
[11] "&gt;=10"</code></pre>
</div>
</div>
</div>
</div></div>
</section>
<section id="using-ifelse-to-control-the-execution-of-a-function" class="slide level2">
<h2>Using <span style="color:indianred;">if/else</span> to control the execution of a function</h2>
<p><span style="font-size: 30px">Our function <span style="color:indianred;">mean_diam</span> is intended to be used on a numerical vector. It returns an error otherwise:</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href=""></a>vec_char <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>)</span>
<span id="cb53-2"><a href=""></a><span class="fu">mean_diam</span>(vec_char)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">

</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Error in circ/(pi * 100) : non-numeric argument to binary operator</code></pre>
</div>
</div>
<p><span class="fragment"><span style="font-size: 30px">This error is not explicit for a user, as they donât know what <em>circ/(pi * 100)</em> is used forâ¦</span></span></p>
</section>
<section id="using-ifelse-with-warning" class="slide level2">
<h2>Using <span style="color:indianred;">if/else</span> with <span style="color:indianred;">warning</span></h2>
<p><span style="font-size: 30px">We can add a test to return <em>NA</em> when <em>circ</em> is not numeric, and add an explicit warning message:</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href=""></a>mean_diam <span class="ot">&lt;-</span> <span class="cf">function</span>(circ, <span class="at">na_act =</span> <span class="cn">TRUE</span>, <span class="at">digits =</span> <span class="cn">NULL</span>) {</span>
<span id="cb55-2"><a href=""></a>    <span class="cf">if</span>(<span class="sc">!</span>(<span class="fu">is.numeric</span>(circ))) {</span>
<span id="cb55-3"><a href=""></a>      <span class="fu">warning</span>(<span class="st">"circ is not numeric, the result is NA"</span>)</span>
<span id="cb55-4"><a href=""></a>      <span class="fu">return</span>(<span class="cn">NA</span>) <span class="co"># if circ is not numeric, the execution stops here</span></span>
<span id="cb55-5"><a href=""></a>    }</span>
<span id="cb55-6"><a href=""></a>  </span>
<span id="cb55-7"><a href=""></a>    diam <span class="ot">&lt;-</span> circ <span class="sc">/</span> (pi <span class="sc">*</span> <span class="dv">100</span>) <span class="co"># Calculate diameters in m</span></span>
<span id="cb55-8"><a href=""></a>    mean_diam <span class="ot">&lt;-</span> <span class="fu">mean</span>(diam, <span class="at">na.rm =</span> na_act) <span class="co"># Calculate the mean </span></span>
<span id="cb55-9"><a href=""></a>    <span class="cf">if</span>(<span class="sc">!</span>(<span class="fu">is.null</span>(digits))) { <span class="co"># Round the diameter only if a value is provided for digits</span></span>
<span id="cb55-10"><a href=""></a>      mean_diam <span class="ot">&lt;-</span> <span class="fu">round</span>(mean_diam, <span class="at">digits =</span> digits)</span>
<span id="cb55-11"><a href=""></a>    }</span>
<span id="cb55-12"><a href=""></a>    <span class="fu">return</span>(mean_diam) <span class="co"># Return the mean diameter</span></span>
<span id="cb55-13"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">

</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href=""></a><span class="fu">mean_diam</span>(vec_char)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stderr">
<pre><code>Warning in mean_diam(vec_char): circ is not numeric, the result is NA</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
</div>
<aside class="notes">
<p>Many parenthesis, click on a closing one to see which one it closes</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="using-ifelse-with-stop" class="slide level2">
<h2>Using <span style="color:indianred;">if/else</span> with <span style="color:indianred;">stop</span></h2>
<p><span style="font-size: 30px"><span style="color:indianred;">warning</span> does not stop the execution of the function (in our previous slide itâs <span style="color:indianred;">return</span> that stopped it).</span></p>
<p><span class="fragment"><span style="font-size: 30px">On the contrary, <span style="color:indianred;">stop</span> triggers an error that stops the execution:</span></span></p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href=""></a>mean_diam <span class="ot">&lt;-</span> <span class="cf">function</span>(circ, <span class="at">na_act =</span> <span class="cn">TRUE</span>, <span class="at">digits =</span> <span class="cn">NULL</span>) {</span>
<span id="cb59-2"><a href=""></a>    <span class="cf">if</span>(<span class="sc">!</span>(<span class="fu">is.numeric</span>(circ))) {</span>
<span id="cb59-3"><a href=""></a>      <span class="fu">stop</span>(<span class="st">"circ must be numeric"</span>)</span>
<span id="cb59-4"><a href=""></a>      }</span>
<span id="cb59-5"><a href=""></a>  </span>
<span id="cb59-6"><a href=""></a>    diam <span class="ot">&lt;-</span> circ <span class="sc">/</span> (pi <span class="sc">*</span> <span class="dv">100</span>) <span class="co"># Calculate diameters in m</span></span>
<span id="cb59-7"><a href=""></a>    mean_diam <span class="ot">&lt;-</span> <span class="fu">mean</span>(diam, <span class="at">na.rm =</span> na_act) <span class="co"># Calculate the mean </span></span>
<span id="cb59-8"><a href=""></a>    <span class="cf">if</span>(<span class="sc">!</span>(<span class="fu">is.null</span>(digits))) { <span class="co"># Round the diameter only if a value is provided for digits</span></span>
<span id="cb59-9"><a href=""></a>      mean_diam <span class="ot">&lt;-</span> <span class="fu">round</span>(mean_diam, <span class="at">digits =</span> digits)</span>
<span id="cb59-10"><a href=""></a>    }</span>
<span id="cb59-11"><a href=""></a>    <span class="fu">return</span>(mean_diam) <span class="co"># Return the mean diameter</span></span>
<span id="cb59-12"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">

</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href=""></a><span class="fu">mean_diam</span>(vec_char)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">

</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Error in mean_diam(vec_char) : circ must be numeric</code></pre>
</div>
</div>
</div>
<aside class="notes">
<p>warning can be used independently of return, in this case the execution continues</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="using-ifelse-outside-a-function" class="slide level2">
<h2>Using <span style="color:indianred;">if/else</span> outside a function</h2>
<p>We have seen many examples of use of <span style="color:indianred;">if/else</span> inside a function, but we can also use it outside:</p>
<ul>
<li class="fragment"><p>at the beginning of a script, together with a warning or a stop, to check if the data are valid</p></li>
<li class="fragment"><p>in a Quarto or R Markdown document, to adapt the output of a chunk depending on it result</p></li>
<li class="fragment"><p>â¦</p></li>
</ul>
<aside class="notes">
<p>for quarto =&gt; we could either print âthe statistical test is significantâ or âthe statistical test not significantâ, by performing a test on the p-value</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="loops" class="title-slide slide level1 center">
<h1>Loops</h1>
<p>A loop allows to repeatedly executes a block of code.</p>
</section>
<section id="for-loop" class="slide level2">
<h2><span style="color:indianred;">for</span> loop</h2>
<p>Letâs take a simple example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href=""></a><span class="cf">for</span> (item <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) {</span>
<span id="cb62-2"><a href=""></a>    <span class="fu">print</span>(item)</span>
<span id="cb62-3"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1
[1] 2
[1] 3
[1] 4
[1] 5</code></pre>
</div>
</div>
</section>
<section id="for-loop-1" class="slide level2">
<h2><span style="color:indianred;">for</span> loop</h2>

<img data-src="for_loop.png" style="width:350.0%" class="r-stretch"><div class="columns">
<div class="column" style="width:60%;">
<p>A <span style="color:indianred;">for</span> loop executes a block of code for each element of a vector. For each iteration, the loop sequentially assigns a value from the vector to the loop iterator.</p>
</div><div class="column" style="width:40%;">
<div class="fragment">
<p><span style="font-size: 25px"><em>In our example:</em> <em>item</em> take the value 1, and the block of code prints it, then <em>item</em> take the value 2, and the block of code prints it, then â¦, then <em>item</em> take the value 5, and the block of code prints it</span></p>
</div>
</div></div>
</section>
<section id="for-loop-2" class="slide level2">
<h2><span style="color:indianred;">for</span> loop</h2>
<p>The vector can be of any mode, and we can give any name to the iterator (usually we use <em>n</em> or <em>i</em>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href=""></a>vec_name <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Lucas"</span>, <span class="st">"Gabriel"</span>, <span class="st">"Ana"</span>)</span>
<span id="cb64-2"><a href=""></a><span class="cf">for</span> (name <span class="cf">in</span> vec_name) {</span>
<span id="cb64-3"><a href=""></a>  <span class="fu">message</span>(<span class="st">"Hello "</span>, name, <span class="st">"!"</span>)</span>
<span id="cb64-4"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stderr">
<pre><code>Hello Lucas!</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Hello Gabriel!</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Hello Ana!</code></pre>
</div>
</div>
<p><span class="fragment"><span style="font-size: 30px">Here the vector is of type <em>character</em> and the iterator is called <em>name</em>.</span></span></p>
<div class="fragment">
<p><span style="font-size: 30px">Note that the iterator is conserved when the loop finishes, with its last value:</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href=""></a>name</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Ana"</code></pre>
</div>
</div>
</div>
</section>
<section id="iterating-over-elements" class="slide level2">
<h2>Iterating over elements</h2>
<p>In the previous example</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href=""></a><span class="cf">for</span> (name <span class="cf">in</span> vec_name) {</span>
<span id="cb70-2"><a href=""></a>  <span class="fu">message</span>(<span class="st">"Hello "</span>, name, <span class="st">"!"</span>)</span>
<span id="cb70-3"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">

</div>
<p>we iterate over the <strong>elements</strong> (the values) of a vector.</p>
</section>
<section id="iterating-over-names" class="slide level2">
<h2>Iterating over names</h2>
<p>We can also iterate over <strong>names</strong> :</p>
<div class="columns">
<div class="column" style="width:42%;">
<ul>
<li class="fragment">of a named vector:</li>
</ul>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href=""></a><span class="co"># create a named vector</span></span>
<span id="cb71-2"><a href=""></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">a =</span> <span class="dv">2</span>, <span class="at">b =</span> <span class="dv">4</span>, <span class="at">c =</span> <span class="dv">3</span>)</span>
<span id="cb71-3"><a href=""></a></span>
<span id="cb71-4"><a href=""></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">names</span>(vec)) {</span>
<span id="cb71-5"><a href=""></a>  <span class="fu">print</span>(vec[[i]])</span>
<span id="cb71-6"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2
[1] 4
[1] 3</code></pre>
</div>
</div>
</div>
</div><div class="column" style="width:58%;">
<ul>
<li class="fragment">of a named list:</li>
</ul>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href=""></a><span class="co"># create a name list</span></span>
<span id="cb73-2"><a href=""></a>desserts <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">Sophia =</span> <span class="st">"banana bread"</span>, </span>
<span id="cb73-3"><a href=""></a>                 <span class="at">Eliott =</span> <span class="st">"pancakes"</span>, </span>
<span id="cb73-4"><a href=""></a>                 <span class="at">Karina =</span> <span class="st">"chocolate cake"</span>)</span>
<span id="cb73-5"><a href=""></a></span>
<span id="cb73-6"><a href=""></a><span class="cf">for</span> (n <span class="cf">in</span> <span class="fu">names</span>(desserts)) {</span>
<span id="cb73-7"><a href=""></a>  <span class="fu">message</span>(n, <span class="st">" loves "</span>, desserts[[n]])</span>
<span id="cb73-8"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stderr">
<pre><code>Sophia loves banana bread</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Eliott loves pancakes</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Karina loves chocolate cake</code></pre>
</div>
</div>
</div>
</div></div>
</section>
<section id="iterating-over-names-1" class="slide level2 scrollable">
<h2>Iterating over names</h2>
<p><span style="font-size: 30px">or over names of columns of a data frame:</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href=""></a><span class="co"># take a subset of iris</span></span>
<span id="cb77-2"><a href=""></a>iris_sub <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span>  <span class="fu">filter</span>(Species <span class="sc">==</span> <span class="st">"setosa"</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>Species) </span>
<span id="cb77-3"><a href=""></a></span>
<span id="cb77-4"><a href=""></a><span class="co"># Create a new data frame with the same structure as iris_sub</span></span>
<span id="cb77-5"><a href=""></a>  <span class="co"># to store the scale data</span></span>
<span id="cb77-6"><a href=""></a>iris_sub_scaled <span class="ot">&lt;-</span> iris_sub</span>
<span id="cb77-7"><a href=""></a></span>
<span id="cb77-8"><a href=""></a><span class="co"># replace the values in each colum by the scaled values</span></span>
<span id="cb77-9"><a href=""></a>  <span class="co"># iterating by column names</span></span>
<span id="cb77-10"><a href=""></a><span class="cf">for</span> (col <span class="cf">in</span> <span class="fu">names</span>(iris_sub)) {</span>
<span id="cb77-11"><a href=""></a>  iris_sub_scaled[[col]] <span class="ot">&lt;-</span> <span class="fu">as.vector</span>(<span class="fu">scale</span>(iris_sub[[col]]))</span>
<span id="cb77-12"><a href=""></a>}</span>
<span id="cb77-13"><a href=""></a></span>
<span id="cb77-14"><a href=""></a><span class="fu">summary</span>(iris_sub_scaled)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>  Sepal.Length       Sepal.Width        Petal.Length      Petal.Width     
 Min.   :-2.00290   Min.   :-2.97575   Min.   :-2.6603   Min.   :-1.3854  
 1st Qu.:-0.58441   1st Qu.:-0.60148   1st Qu.:-0.3570   1st Qu.:-0.4365  
 Median :-0.01702   Median :-0.07387   Median : 0.2188   Median :-0.4365  
 Mean   : 0.00000   Mean   : 0.00000   Mean   : 0.0000   Mean   : 0.0000  
 3rd Qu.: 0.55037   3rd Qu.: 0.65160   3rd Qu.: 0.6507   3rd Qu.: 0.5124  
 Max.   : 2.25255   Max.   : 2.56421   Max.   : 2.5221   Max.   : 3.3591  </code></pre>
</div>
</div>
<aside class="notes">
<p>subset of iris: keep only 1 species and only numerical columns</p>
<p>note that here we modify an existing object (iris_sub_scaled)</p>
<p>check: the mean is indeed 0</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="iterating-over-numeric-indices" class="slide level2">
<h2>Iterating over numeric indices</h2>
<p>We can also iterate over <strong>numeric indices</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href=""></a><span class="cf">for</span> (n <span class="cf">in</span> <span class="fu">seq_along</span>(vec_name)) {</span>
<span id="cb79-2"><a href=""></a>  <span class="fu">message</span>(<span class="st">"Hello "</span>, vec_name[[n]], <span class="st">"!"</span>)</span>
<span id="cb79-3"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stderr">
<pre><code>Hello Lucas!</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Hello Gabriel!</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Hello Ana!</code></pre>
</div>
</div>
<div class="fragment">
<p>The function <span style="color:indianred;">seq_along</span> returns a sequence of integers from 1 to the length of a vector.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href=""></a><span class="fu">seq_along</span>(vec_name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3</code></pre>
</div>
</div>
</div>
</section>
<section id="iterating-over-numeric-indices-1" class="slide level2">
<h2>Iterating over numeric indices</h2>
<p>Instead of <em>seq_along(vec_name)</em>, we could also write <em>1:length(vec_name)</em>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href=""></a><span class="cf">for</span> (n <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(vec_name)) {</span>
<span id="cb85-2"><a href=""></a>  <span class="fu">message</span>(<span class="st">"Hello "</span>, vec_name[[n]], <span class="st">"!"</span>)</span>
<span id="cb85-3"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stderr">
<pre><code>Hello Lucas!</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Hello Gabriel!</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Hello Ana!</code></pre>
</div>
</div>
<p><span class="fragment">â ï¸ seq_along is safer</span></p>
</section>
<section id="iterating-over-numeric-indices-2" class="slide level2 smaller">
<h2>Iterating over numeric indices</h2>
<p><span style="font-size: 30px">Letâs take a vector of length 0:</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href=""></a>vec_null <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb89-2"><a href=""></a><span class="fu">length</span>(vec_null)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
<p><span class="fragment"><span style="font-size: 30px">The loop should not be executed:</span></span></p>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li class="fragment"><span style="font-size: 30px">Using <em>1:length()</em> will not behave as expected:</span></li>
</ul>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href=""></a><span class="cf">for</span> (n <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(vec_null)) {</span>
<span id="cb91-2"><a href=""></a>  <span class="fu">message</span>(<span class="st">"Hello "</span>, vec_null[[n]], <span class="st">"!"</span>)</span>
<span id="cb91-3"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stderr">
<pre><code>Hello !
Hello !</code></pre>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li class="fragment"><span style="font-size: 30px">Using <em>seq_along</em> will behave as expected (it does nothing):</span></li>
</ul>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href=""></a><span class="cf">for</span> (n <span class="cf">in</span> <span class="fu">seq_along</span>(vec_null)) {</span>
<span id="cb93-2"><a href=""></a>  <span class="fu">message</span>(<span class="st">"Hello "</span>, vec_null[[n]], <span class="st">"!"</span>)</span>
<span id="cb93-3"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">

</div>
</div>
</div></div>
<p><span class="fragment"><span style="font-size: 30px">Why is that?</span></span></p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href=""></a><span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(vec_null)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href=""></a><span class="fu">seq_along</span>(vec_null)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>integer(0)</code></pre>
</div>
</div>
</div>
</section>
<section id="iterating-over-numeric-indices-3" class="slide level2 scrollable">
<h2>Iterating over numeric indices</h2>
<p><span style="font-size: 30px">Iterating over numeric indices is the most common form. It is useful when we want to use the index (the iterator) for more than one purpose within the loop:</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href=""></a><span class="cf">for</span> (m <span class="cf">in</span> <span class="fu">seq_along</span>(month.name)) {</span>
<span id="cb98-2"><a href=""></a>  month <span class="ot">&lt;-</span> month.name[[m]]</span>
<span id="cb98-3"><a href=""></a>  rank <span class="ot">&lt;-</span> m</span>
<span id="cb98-4"><a href=""></a>  <span class="fu">message</span>(month, <span class="st">" is the month "</span>, rank)</span>
<span id="cb98-5"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stderr">
<pre><code>January is the month 1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>February is the month 2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>March is the month 3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>April is the month 4</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>May is the month 5</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>June is the month 6</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>July is the month 7</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>August is the month 8</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>September is the month 9</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>October is the month 10</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>November is the month 11</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>December is the month 12</code></pre>
</div>
</div>
</section>
<section id="output-of-a-loop" class="slide level2">
<h2>Output of a loop</h2>
<p><span style="font-size: 30px">When a loop generates data, it is important to pre-allocate the output to the required size rather than grow it inside a loop, because pre-allocation avoids repeated memory copying and is significantly <strong>faster</strong> and <strong>more efficient</strong>, especially for large outputs</span></p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="fragment">
<p><span style="font-size: 30px">Preferred way:</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href=""></a><span class="co"># create an output </span></span>
<span id="cb111-2"><a href=""></a> <span class="co"># of the required size</span></span>
<span id="cb111-3"><a href=""></a>out <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">"integer"</span>, </span>
<span id="cb111-4"><a href=""></a>              <span class="at">length =</span> <span class="dv">10</span>)</span>
<span id="cb111-5"><a href=""></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(out)) {</span>
<span id="cb111-6"><a href=""></a>  out[[i]] <span class="ot">&lt;-</span> i</span>
<span id="cb111-7"><a href=""></a>}</span>
<span id="cb111-8"><a href=""></a>out  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="fragment">
<p><span style="font-size: 30px">Much slower and less efficient way:</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href=""></a><span class="co"># create an empty output </span></span>
<span id="cb113-2"><a href=""></a>  <span class="co"># and grow it inside the loop</span></span>
<span id="cb113-3"><a href=""></a>out <span class="ot">&lt;-</span> <span class="fu">integer</span>()</span>
<span id="cb113-4"><a href=""></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb113-5"><a href=""></a>  out <span class="ot">&lt;-</span> <span class="fu">c</span>(out, i)</span>
<span id="cb113-6"><a href=""></a>}</span>
<span id="cb113-7"><a href=""></a>out</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
</div>
</div>
</div></div>
<p><span class="fragment"><span style="font-size: 25px"><em>This is particularly important for especially for large outputs.</em></span></span></p>
</section>
<section id="while-loops" class="slide level2">
<h2><span style="color:indianred;">while</span> loops</h2>
<p>Letâs take an example of a <span style="color:indianred;">while</span> loop that simulate flipping a coin util we obtain a head:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href=""></a>res <span class="ot">&lt;-</span> <span class="st">""</span></span>
<span id="cb115-2"><a href=""></a><span class="cf">while</span> (res <span class="sc">!=</span> <span class="st">"head"</span>) {</span>
<span id="cb115-3"><a href=""></a>    res <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"head"</span>, <span class="st">"tail"</span>), <span class="at">size =</span> <span class="dv">1</span>)</span>
<span id="cb115-4"><a href=""></a>    <span class="fu">print</span>(res)</span>
<span id="cb115-5"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "head"</code></pre>
</div>
</div>
<div class="fragment">
<p><span style="font-size: 30px">Letâs try again:</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href=""></a>res <span class="ot">&lt;-</span> <span class="st">""</span></span>
<span id="cb117-2"><a href=""></a><span class="cf">while</span> (res <span class="sc">!=</span> <span class="st">"head"</span>) {</span>
<span id="cb117-3"><a href=""></a>    res <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"head"</span>, <span class="st">"tail"</span>), <span class="at">size =</span> <span class="dv">1</span>)</span>
<span id="cb117-4"><a href=""></a>    <span class="fu">print</span>(res)</span>
<span id="cb117-5"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "head"</code></pre>
</div>
</div>
</div>
</section>
<section id="while-loops-1" class="slide level2">
<h2><span style="color:indianred;">while</span> loops</h2>

<img data-src="while.png" class="r-stretch"><p>A <span style="color:indianred;">while</span> loop executes a block of code as long as the conditions is true.</p>
</section>
<section id="using-next-within-a-loop" class="slide level2">
<h2>Using <span style="color:indianred;">next</span> within a loop</h2>
<p><span style="font-size: 30px">We can use <span style="color:indianred;">next</span> within a loop to skip the rest of the current iteration and move directly to the next one under a given condition.</span></p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="fragment">
<p><span style="font-size: 25px">Letâs work with a subset of the data starwars:</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href=""></a>starwars <span class="ot">&lt;-</span> starwars[,<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>] </span>
<span id="cb119-2"><a href=""></a><span class="fu">head</span>(starwars, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 Ã 4
  name           height  mass hair_color
  &lt;chr&gt;           &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     
1 Luke Skywalker    172    77 blond     
2 C-3PO             167    75 &lt;NA&gt;      
3 R2-D2              96    32 &lt;NA&gt;      </code></pre>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href=""></a><span class="cf">for</span>(var <span class="cf">in</span> <span class="fu">names</span>(starwars)) {</span>
<span id="cb121-2"><a href=""></a>  <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.numeric</span>(starwars[[var]])) {</span>
<span id="cb121-3"><a href=""></a>    <span class="cf">next</span></span>
<span id="cb121-4"><a href=""></a>  }</span>
<span id="cb121-5"><a href=""></a>  <span class="fu">message</span>(<span class="st">"The mean of "</span>, var, </span>
<span id="cb121-6"><a href=""></a>          <span class="st">" is "</span>, </span>
<span id="cb121-7"><a href=""></a>          <span class="fu">mean</span>(starwars[[var]], </span>
<span id="cb121-8"><a href=""></a>               <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb121-9"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stderr">
<pre><code>The mean of height is 174.604938271605</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The mean of mass is 97.3118644067797</code></pre>
</div>
</div>
</div>
</div></div>
<p><span class="fragment"><span style="font-size: 30px"><em>Here we create a loop returning the mean of numeric columns of a data frame. We use <span style="color:indianred;">next</span> to skip any column that is not numeric:</em></span></span></p>
<aside class="notes">
<p>here we can round itâ¦</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="using-break-within-a-loop" class="slide level2">
<h2>Using <span style="color:indianred;">break</span> within a loop</h2>
<p><span style="font-size: 30px">We can use also use <span style="color:indianred;">break</span>, which stop the whole loop under a given condition.</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href=""></a><span class="cf">for</span>(var <span class="cf">in</span> <span class="fu">names</span>(starwars)) {</span>
<span id="cb124-2"><a href=""></a>  <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.numeric</span>(starwars[[var]])) {</span>
<span id="cb124-3"><a href=""></a>    <span class="cf">break</span></span>
<span id="cb124-4"><a href=""></a>  }</span>
<span id="cb124-5"><a href=""></a>  <span class="fu">message</span>(<span class="st">"The mean of "</span>, var, </span>
<span id="cb124-6"><a href=""></a>          <span class="st">" is "</span>, </span>
<span id="cb124-7"><a href=""></a>          <span class="fu">mean</span>(starwars[[var]], </span>
<span id="cb124-8"><a href=""></a>               <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb124-9"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">

</div>
<p><span class="fragment"><span style="font-size: 30px"><em>Here nothing is return as the first column is not numeric, so the loop stops at the first iteration.</em></span></span></p>
</section>
<section id="writing-a-loop" class="slide level2">
<h2>Writing a loop</h2>
<p>As for a function, a loop needs to be write <strong>step by step</strong>:</p>
<ul>
<li class="fragment"><p>Plan the loop before you start coding.</p></li>
<li class="fragment"><p>Set the iterator to its first value while writing the loop.</p></li>
<li class="fragment"><p>Test each line of code as you write it, using that initial iterator value.</p></li>
<li class="fragment"><p>Once finished, test the full loop with the entire dataset.</p></li>
</ul>
</section></section>
<section>
<section id="functional-with-the-tidyverse" class="title-slide slide level1 center">
<h1>Functional with the <span style="color:indianred;">tidyverse</span></h1>
<p><strong>Functionnal programming</strong> is a way of writing code based on the use of small functions.</p>
<p>It is often used as an alternative to loops.</p>
<aside class="notes">
<p>most of the example that we are going to see could have been writen as a loop</p>
<p>but are faster, but more importantly more concice</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="map" class="slide level2 scrollable">
<h2><span style="color:indianred;">map</span></h2>
<p><span style="font-size: 30px"><span style="color:indianred;">map</span> is a function from the package <span style="color:indianred;">purr</span> used to apply a function to each element of a vector or a list:</span></p>
<div class="fragment">
<p><span style="font-size: 30px">Letâs first create a <strong>vector</strong> and a small function:</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href=""></a>vec_num <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">8</span>, <span class="dv">4</span>) <span class="co"># create a vector</span></span>
<span id="cb125-2"><a href=""></a><span class="co"># create a function giving TRUE is x &gt; 5, FALSE otherwise</span></span>
<span id="cb125-3"><a href=""></a>sup_5 <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {x <span class="sc">&gt;</span> <span class="dv">5</span>} </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">

</div>
</div>
<p><span class="fragment"><span style="font-size: 30px">To use <span style="color:indianred;">map</span>, we first pass the vector/list on which to apply a function, and then the function to apply</span></span></p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href=""></a><span class="fu">map</span>(vec_num, <span class="co"># vector </span></span>
<span id="cb126-2"><a href=""></a>    sup_5)   <span class="co"># function </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] FALSE

[[2]]
[1] TRUE

[[3]]
[1] FALSE</code></pre>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href=""></a><span class="co"># or using a pipe</span></span>
<span id="cb128-2"><a href=""></a>vec_num <span class="sc">%&gt;%</span> <span class="fu">map</span>(sup_5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] FALSE

[[2]]
[1] TRUE

[[3]]
[1] FALSE</code></pre>
</div>
</div>
</div>
</div></div>
</section>
<section id="map-1" class="slide level2">
<h2><span style="color:indianred;">map</span></h2>
<p><span style="font-size: 30px">Letâs use our function mean_diam on a <strong>list</strong> of vectors of circumferences:</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href=""></a><span class="co"># create the list</span></span>
<span id="cb130-2"><a href=""></a>circ_list <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">sample1 =</span> <span class="fu">runif</span>(<span class="at">n =</span> <span class="dv">35</span>, <span class="at">min =</span> <span class="dv">30</span>, <span class="at">max =</span> <span class="dv">250</span>),</span>
<span id="cb130-3"><a href=""></a>                 <span class="at">sample2 =</span> <span class="fu">runif</span>(<span class="at">n =</span> <span class="dv">35</span>, <span class="at">min =</span> <span class="dv">30</span>, <span class="at">max =</span> <span class="dv">250</span>),</span>
<span id="cb130-4"><a href=""></a>                 <span class="at">sample3 =</span> <span class="fu">runif</span>(<span class="at">n =</span> <span class="dv">35</span>, <span class="at">min =</span> <span class="dv">30</span>, <span class="at">max =</span> <span class="dv">250</span>))</span>
<span id="cb130-5"><a href=""></a><span class="co"># apply the function on the list</span></span>
<span id="cb130-6"><a href=""></a>circ_list <span class="sc">%&gt;%</span> <span class="fu">map</span>(mean_diam)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>$sample1
[1] 0.4494918

$sample2
[1] 0.4731782

$sample3
[1] 0.4918592</code></pre>
</div>
</div>
</section>
<section id="variants-of-map" class="slide level2">
<h2>Variants of <span style="color:indianred;">map</span></h2>
<p><span style="font-size: 30px"><span style="color:indianred;">map</span> always return a list.</span></p>
<p><span style="font-size: 30px">But several variants of <span style="color:indianred;">map</span> returning vectors also exist:</span></p>
<ul>
<li class="fragment"><span style="color:indianred;">map_int</span> and map_dbl]{style=âcolor:indianred;â} return a vector of <strong>integer</strong> and <strong>double</strong>, respectivelly</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href=""></a>circ_list <span class="sc">%&gt;%</span> <span class="fu">map_dbl</span>(mean_diam)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>  sample1   sample2   sample3 
0.4494918 0.4731782 0.4918592 </code></pre>
</div>
</div>
<ul>
<li class="fragment"><span style="color:indianred;">map_lgl</span> returns a vector of <strong>logical</strong></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href=""></a>vec_num <span class="sc">%&gt;%</span> <span class="fu">map_lgl</span>(sup_5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE  TRUE FALSE</code></pre>
</div>
</div>
<ul>
<li class="fragment"><span style="color:indianred;">map_chr</span> returns a vector of <strong>character</strong></li>
</ul>
<!--(ex dessert Ã  reprendre de plus bas, essayer d'y mettre une function?)-->
<aside class="notes">
<p>ex to do the same thing than in the two example before but returning a vector</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="variants-of-map-1" class="slide level2 smaller">
<h2>Variants of <span style="color:indianred;">map</span></h2>
<p><span style="font-size: 30px">Here is an example of use of <span style="color:indianred;">map_chr</span> on the list <em>desserts</em> (that we created before):</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href=""></a><span class="co"># create a function</span></span>
<span id="cb136-2"><a href=""></a>love_dessert <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb136-3"><a href=""></a>  <span class="fu">paste</span>(<span class="st">"I loves"</span>, x,<span class="st">"!"</span>)</span>
<span id="cb136-4"><a href=""></a>}</span>
<span id="cb136-5"><a href=""></a></span>
<span id="cb136-6"><a href=""></a>desserts <span class="sc">%&gt;%</span> <span class="fu">map_chr</span>(love_dessert)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>                    Sophia                     Eliott 
  "I loves banana bread !"       "I loves pancakes !" 
                    Karina 
"I loves chocolate cake !" </code></pre>
</div>
</div>
<div class="fragment">
<p><span style="font-size: 30px">Note that this is an alternative to the following loop:</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href=""></a>out_dessert <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">length =</span> <span class="fu">length</span>(desserts), <span class="at">mode =</span> <span class="st">"character"</span>) <span class="co"># vector to store the result</span></span>
<span id="cb138-2"><a href=""></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(desserts)) {</span>
<span id="cb138-3"><a href=""></a>  <span class="fu">names</span>(out_dessert)[i] <span class="ot">&lt;-</span> <span class="fu">names</span>(desserts)[i]</span>
<span id="cb138-4"><a href=""></a>  out_dessert[i] <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"I loves"</span>, desserts[i],<span class="st">"!"</span>)</span>
<span id="cb138-5"><a href=""></a>}</span>
<span id="cb138-6"><a href=""></a>out_dessert</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>                    Sophia                     Eliott 
  "I loves banana bread !"       "I loves pancakes !" 
                    Karina 
"I loves chocolate cake !" </code></pre>
</div>
</div>
</div>
</section>
<section id="using-anonymous-functions-with-map" class="slide level2">
<h2>Using anonymous functions with <span style="color:indianred;">map</span></h2>
<p><span style="font-size: 30px">For a small function that we donât want to reuse, we can define the function directly inside <span style="color:indianred;">map</span>:</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href=""></a>desserts <span class="sc">%&gt;%</span> <span class="fu">map_chr</span>(<span class="cf">function</span>(x) {</span>
<span id="cb140-2"><a href=""></a>  <span class="fu">paste</span>(<span class="st">"I loves"</span>, x,<span class="st">"!"</span>)</span>
<span id="cb140-3"><a href=""></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>                    Sophia                     Eliott 
  "I loves banana bread !"       "I loves pancakes !" 
                    Karina 
"I loves chocolate cake !" </code></pre>
</div>
</div>
<div class="fragment">
<p><span style="font-size: 30px">We can also use the abbreviated syntax, where <span style="color:indianred;">function(â¦){}</span> is replaced by <span style="color:indianred;">\(â¦)</span>:</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href=""></a>desserts <span class="sc">%&gt;%</span> <span class="fu">map_chr</span>(\(x) <span class="fu">paste</span>(<span class="st">"I loves"</span>, x,<span class="st">"!"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>                    Sophia                     Eliott 
  "I loves banana bread !"       "I loves pancakes !" 
                    Karina 
"I loves chocolate cake !" </code></pre>
</div>
</div>
</div>
<aside class="notes">
<p>this is advanced, not problem if you donât understand / remember</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="walk-for-side-effects" class="slide level2">
<h2><span style="color:indianred;">walk</span> for side effects</h2>
<p><span style="font-size: 30px">The function <span style="color:indianred;">walk</span> is used when you want to perform an action for its side effect (e.g., printing a message, creating a plot, or saving a file). It doesnât return a result:</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href=""></a>vec_name <span class="sc">%&gt;%</span> <span class="co"># vector of names created earlier</span></span>
<span id="cb144-2"><a href=""></a>  <span class="fu">walk</span>(</span>
<span id="cb144-3"><a href=""></a>    <span class="cf">function</span>(name) {<span class="fu">message</span>(<span class="st">"Hello "</span>, name, <span class="st">"!"</span>)}</span>
<span id="cb144-4"><a href=""></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stderr">
<pre><code>Hello Lucas!</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Hello Gabriel!</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Hello Ana!</code></pre>
</div>
</div>
<p><span class="fragment"><span style="font-size: 30px">ð¡This is equivalent to the <span style="color:indianred;">for</span> loop we wrote before.</span></span></p>
</section>
<section id="apply-a-function-to-several-columns-with-across" class="slide level2">
<h2>Apply a function to several columns with <span style="color:indianred;">across</span></h2>
<p>&lt;â give some example above with mutate (recodage likert) and some with summarise (mean)â&gt;</p>
<p>reprendre mon example de Likert scale but do it accross columns</p>
</section>
<section id="apply-a-function-to-several-columns-with-across-1" class="slide level2">
<h2>Apply a function to several columns with <span style="color:indianred;">across</span></h2>
<p>plage de colum can be specify with c(), with :</p>
<p>ou starts_with, end_with or contains</p>
<p>ou num_range</p>
<p>or where (including where with a complex test)</p>
<p>or with everything</p>
<p>and more : https://dplyr.tidyverse.org/reference/select.html</p>
</section>
<section id="section-2" class="slide level2">
<h2></h2>
<p>pass some more argument to the function called in accross</p>
</section>
<section id="names-of-the-column-created-by-accross-and-mutate" class="slide level2">
<h2>Names of the column created by accross and mutate</h2>
</section>
<section id="apply-several-function-to-several-columns" class="slide level2">
<h2>Apply several function to several columns</h2>
</section>
<section id="across-or-map" class="slide level2">
<h2>across or map ?</h2>
<p>https://juba.github.io/tidyverse/18-purrr.html#it%C3%A9rer-sur-les-colonnes-dun-tableau-de-donn%C3%A9es</p>
</section>
<section id="apply-a-transformation-line-by-line-with-rowwise" class="slide level2">
<h2>Apply a transformation line by line with [rowwise]</h2>
<p>essayer de prendre lâex dâun runif</p>
</section>
<section id="apply-a-transformation-line-by-line-with-rowwise-and-c_accross" class="slide level2">
<h2>Apply a transformation line by line with [rowwise] and [c_accross]</h2>
<p>faire la moyenne des notes de likert</p>
<p>voir si je commence avec map???</p>
<p>purr::map ici (avec un exemple using mean_diam_func on dataset in a list par ex) parler aussi de walk (in r4ds) parler aussi de reduce??? r4ds</p>
</section>
<section id="the-apply-family" class="slide level2">
<h2>The <span style="color:indianred;">apply</span> family</h2>
<p>Not covered but here is a good ressource:</p>
<p>https://frbcesab.github.io/tips-and-tricks/posts/2024-11-19-the-apply-function-family/</p>
<p>et voir aussi ici pour comparaison https://r4ds.had.co.nz/iteration.html#base-r</p>
</section>
<section id="section-3" class="slide level2">
<h2></h2>
<p>inclure purr::map? ici ou avec accross ? juste le mentionner ici et revenir dessus avec accross?</p>
<!--ð¹ Option 1 â map() en session 1
Si tu veux :

renforcer lâutilitÃ© des fonctions personnalisÃ©es,

montrer un usage concret et rapide,

ne pas alourdir la session 2.

ð¹ Option 2 â map() en session 2
Si tu veux :

regrouper les approches âapply-likeâ (across, map, etc.),

comparer diffÃ©rents paradigmes dâapplication de fonctions (par colonnes, par Ã©lÃ©ments, par lignes),

introduire map2() ou pmap() avec les autres constructions avancÃ©es.

-->
</section></section>
<section>
<section id="using-a-loop-or-not" class="title-slide slide level1 center">
<h1>Using a loop or not?</h1>
<!-- put this at the very end, after seeing the functional programming things-->
</section>
<section id="when-not-to-use-a-loop" class="slide level2">
<h2>when not to use a loop</h2>
<p>1/ when group by and summarise rather than for loop per group</p>
<p>2/ when vectorised alternative Juba and here https://thinkr.fr/comment-faire-des-boucles-en-r-ou-pas/</p>
<ul>
<li class="fragment">ex iris_sub scale rather than our loop</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href=""></a>test <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">scale</span>(iris_sub))</span>
<span id="cb148-2"><a href=""></a><span class="fu">summary</span>(test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>  Sepal.Length       Sepal.Width        Petal.Length      Petal.Width     
 Min.   :-2.00290   Min.   :-2.97575   Min.   :-2.6603   Min.   :-1.3854  
 1st Qu.:-0.58441   1st Qu.:-0.60148   1st Qu.:-0.3570   1st Qu.:-0.4365  
 Median :-0.01702   Median :-0.07387   Median : 0.2188   Median :-0.4365  
 Mean   : 0.00000   Mean   : 0.00000   Mean   : 0.0000   Mean   : 0.0000  
 3rd Qu.: 0.55037   3rd Qu.: 0.65160   3rd Qu.: 0.6507   3rd Qu.: 0.5124  
 Max.   : 2.25255   Max.   : 2.56421   Max.   : 2.5221   Max.   : 3.3591  </code></pre>
</div>
</div>
<p>3/ when when accross and purrâ¦ can be used</p>
<ul>
<li class="fragment">ex1: standardised iris_sub but with a side effect that prints the (cannot be vectorised but used with accross) or the starwar example?</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href=""></a><span class="co"># A ADAPTER AVEC iris_sub (ou pas...)</span></span>
<span id="cb150-2"><a href=""></a></span>
<span id="cb150-3"><a href=""></a>df <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span></span>
<span id="cb150-4"><a href=""></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="sc">~</span> {</span>
<span id="cb150-5"><a href=""></a>    <span class="fu">message</span>(<span class="st">"Standardizing column: "</span>, <span class="fu">cur_column</span>())</span>
<span id="cb150-6"><a href=""></a>    (. <span class="sc">-</span> <span class="fu">mean</span>(.)) <span class="sc">/</span> <span class="fu">sd</span>(.)</span>
<span id="cb150-7"><a href=""></a>  }))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stderr">
<pre><code>Standardizing column: Sepal.Length</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Standardizing column: Sepal.Width</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Standardizing column: Petal.Length</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Standardizing column: Petal.Width</code></pre>
</div>
</div>
<ul>
<li class="fragment">ex2: favorite dessert avec purr::map_chr (ex in the help of purr)</li>
</ul>
</section>
<section id="when-to-use-a-loop" class="slide level2">
<h2>When to use a loop</h2>
<p><span style="font-size: 30px">Loops are usefull when each iteration depends on the result of the previous one.</span></p>
<div class="fragment">
<div class="columns">
<div class="column" style="width:80%;">
<p><span style="font-size: 30px">Letâs build a <a href="https://en.wikipedia.org/wiki/Fibonacci_sequence" data-preview-link="false">Fibonacci sequence</a>, defined as:</span></p>
<p><span style="font-size: 30px"><span class="math inline">\(F_0 = 0\)</span>, <span class="math inline">\(F_1 = 1\)</span> and for <span class="math inline">\(n&gt;1\)</span> <span class="math inline">\(F_n = F_{n-1} + F_{n-2}\)</span></span></p>
</div><div class="column" style="width:20%;">
<p><img data-src="fibonacci.png"></p>
</div></div>
<div class="cell">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href=""></a>n <span class="ot">=</span> <span class="dv">20</span> <span class="co"># length of the sequence</span></span>
<span id="cb155-2"><a href=""></a>fib <span class="ot">&lt;-</span> <span class="fu">numeric</span>(n) <span class="co"># Fibonacci sequence</span></span>
<span id="cb155-3"><a href=""></a>fib[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">0</span> <span class="co"># F0</span></span>
<span id="cb155-4"><a href=""></a>fib[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="co"># F1</span></span>
<span id="cb155-5"><a href=""></a></span>
<span id="cb155-6"><a href=""></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(fib)[<span class="dv">3</span><span class="sc">:</span>n]) {</span>
<span id="cb155-7"><a href=""></a>  fib[i] <span class="ot">&lt;-</span> fib[i <span class="sc">-</span> <span class="dv">1</span>] <span class="sc">+</span> fib[i <span class="sc">-</span> <span class="dv">2</span>]</span>
<span id="cb155-8"><a href=""></a>}</span>
<span id="cb155-9"><a href=""></a></span>
<span id="cb155-10"><a href=""></a>fib</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code> [1]    0    1    1    2    3    5    8   13   21   34   55   89  144  233  377
[16]  610  987 1597 2584 4181</code></pre>
</div>
</div>
</div>
<!-- THIS IS FROM CHAT, NEEDS TO BE CHECKED AND REWRITTEN

## When to use a loop

## Early Exit Conditions

Stop when a condition is met
Not possible with vectorized functions

for (i in 1:100) {
  if (value[i] > threshold) break
}

## Side Effects (In Order)

Writing files, printing, logging

Must preserve execution order


for (i in 1:5) {
  message("Processing item ", i)
}

!!!! en fait, je crois que c'est possible avec imap, donc ne pas le mentionner...

## Multiple Outputs or Complex Accumulation

Updating multiple objects in sync

Example: two interdependent numeric vectors



for (i in 2:10) {
  a[i] <- a[i-1] + i
  b[i] <- b[i-1] + a[i]
}

## Dynamic or Growing Structures

BUT CHECK r4ds about what to do when we don't know the size of the output...

Structure changes during loop

Useful in data cleaning or recursive tasks



result <- list()
for (i in 1:10) {
  result[[i]] <- runif(i)
}

-->
</section></section>
<section>
<section id="debugging" class="title-slide slide level1 center">
<h1>Debugging</h1>

<img data-src="debugging.png" style="width:90.0%" class="r-stretch"><aside class="notes">
<p>what is important is how happy you feel when you manage!</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="section-4" class="slide level2">
<h2></h2>
<p>a good start: avoid having to debug by checking the code (especially in function and loops) carrefully =&gt; select some sensible test data, try to anticipate potential problemâ¦</p>
<p>but we cannot think of everythingâ¦ Here just some basic way of debugging</p>
<p>if not too long, run a function or a loop line by one with the problematic dataset, to see where it buggs</p>
<p>otherwise : use print</p>
<p>et dÃ©buggage basique avec print (cf Juba https://juba.github.io/tidyverse/20-debuggage-performance.html) mais le faire Ã  la fin de session 2 car possible aussi dans une boucle hors function</p>
<p>there are more advanced debugging toolsâ¦</p>
</section></section>
<section id="acknowledgments" class="title-slide slide level1 smaller center">
<h1>Acknowledgments</h1>
<div>
<ul>
<li>Barnier J. <em>Introduction Ã  R et au tidyverse</em> <a href="https://juba.github.io/tidyverse/" data-preview-link="false">in French</a></li>
</ul>
<!--
* *Introduction Ã  lâanalyse dâenquÃªtes avec R et RStudio* - Julien Barnier, Julien Biaudet, FranÃ§ois Briatte, Milan Bouchet-Valat, Ewen Gallic, FrÃ©dÃ©rique Giraud, JoÃ«l Gombin, Mayeul Kauffmann, Christophe Lalanne, Joseph Larmarange, Nicolas Robette [in French](https://larmarange.github.io/analyse-R/){preview-link="false"}
-->
</div>
</section>

<section id="ressources" class="title-slide slide level1 center">
<h1>Ressources</h1>
<div>

</div>
<div class="quarto-auto-generated-content">
<div class="footer footer-default">

</div>
</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="going_further_session2_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="going_further_session2_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="going_further_session2_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="going_further_session2_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="going_further_session2_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="going_further_session2_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="going_further_session2_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="going_further_session2_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="going_further_session2_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="going_further_session2_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="going_further_session2_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: true,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    

    <script>

      // htmlwidgets need to know to resize themselves when slides are shown/hidden.

      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current

      // slide changes (different for each slide format).

      (function () {

        // dispatch for htmlwidgets

        function fireSlideEnter() {

          const event = window.document.createEvent("Event");

          event.initEvent("slideenter", true, true);

          window.document.dispatchEvent(event);

        }

    

        function fireSlideChanged(previousSlide, currentSlide) {

          fireSlideEnter();

    

          // dispatch for shiny

          if (window.jQuery) {

            if (previousSlide) {

              window.jQuery(previousSlide).trigger("hidden");

            }

            if (currentSlide) {

              window.jQuery(currentSlide).trigger("shown");

            }

          }

        }

    

        // hookup for slidy

        if (window.w3c_slidy) {

          window.w3c_slidy.add_observer(function (slide_num) {

            // slide_num starts at position 1

            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);

          });

        }

    

      })();

    </script>

    

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
              // target, if specified
              link.setAttribute("target", "_blank");
              if (link.getAttribute("rel") === null) {
                link.setAttribute("rel", "noopener");
              }
              // default icon
              link.classList.add("external");
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>